function login(e,r){r.target.innerHTML=loader,$.ajax({type:"POST",url:server+"api/public/auth/login",data:e,dataType:"json"}).then(function(e){sessionStorage.setItem("userData",JSON.stringify(e)),window.location.href="./dashboard"}).fail(function(e){$("#form-login .errors").html("Error en la autenticación, inténtelo de nuevo.")})}function recover(e,r){r.target.innerHTML=loader,$.ajax({type:"POST",url:server+"api/public/auth/password/email",data:e,dataType:"json"}).then(function(e){$("#recoverOk").removeClass("d-none")}).fail(function(e){$("#recoverErr").removeClass("d-none")})}function recovery(e,r){r.target.innerHTML=loader,$.ajax({type:"POST",url:server+"api/public/auth/password/reset",data:e,dataType:"json"}).then(function(e){$("#recoverOk").removeClass("d-none")}).fail(function(e){$("#recoverErr").removeClass("d-none")})}function checkLogin(){var e=$.parseJSON(sessionStorage.getItem("userData"));null!==e&&(window.location.href="./dashboard")}$(document).ready(function(){checkLogin();let e=new URLSearchParams(window.location.search);e.has("verified")?"true"==e.get("verified")?$("#emailOk").removeClass("d-none"):$("#emailErr").removeClass("d-none"):e.has("email")&&e.has("token")&&($("#email").val(e.get("email")),$("#token").val(e.get("token"))),$("form").submit(function(e){e.preventDefault();var r={},a="";if(console.log(e),$.each(e.originalEvent.srcElement.elements,function(e,n){a+=checkValues(n.name,n.value),r[n.name]=n.value}),console.error(a),""==a)switch(e.target.id){case"form-login":login(r,e);break;case"form-recover":recover(r,e);break;case"form-recovery":recovery(r,e)}else e.target.firstElementChild.innerHTML=a})});