function initValues(){let e=$(".ayuda-provincia"),r=$(".ayuda-ciudad");e.empty(),r.empty(),e.append('<option selected="true" value="" disabled>--Seleccione provincia--</option>'),e.prop("selectedIndex",0),r.append('<option selected="true" value="" disabled>--Seleccione Ciudad--</option>'),r.prop("selectedIndex",0),$.each(provincias,function(r,a){e.append($("<option></option>").attr("value",a.id).text(a.nm))}),e.change(function(){var e=$(this).val();r.empty(),r.append('<option selected="true" value="" disabled>--Seleccione Ciudad--</option>'),r.prop("selectedIndex",0),r.prop("disabled",!1),$.each(ciudades,function(a,t){t.id.substring(0,2)==e&&r.append($("<option></option>").attr("value",t.id).text(t.nm))})})}function getDataForm(e){e.preventDefault();var r={},a="";$.each(e.originalEvent.srcElement.elements,function(e,t){if(a=checkValues(t.name,t.value),$(".title-form .errorsNotification").remove(),$(".title-form").append("<div class='errorsNotification'> <div>"),""!=a)return $(".title-form .errorsNotification").append("<p style='text-align:center; color:red'><strong>"+a+"</strong></p>"),!1;r[t.name]=t.value});let t=$("#checkLegal").is(":checked");return $(".user-form-check").css("color",t?"#212529":"red"),""==a&&t?r:null}function checkValues(e,r){var a="";switch(e){case"name":r.length<3&&(nameregex=/^[a-zA-Z ]+$/,nameregex.test(r)||(a="Error en: Nombre y Apellidos<br>"));break;case"email":emailRegex=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,emailRegex.test(r)||(a="Error en: Email<br>");break;case"phone":(r.length<8||r.length>12)&&(a="Error en: Teléfono<br>");break;case"password":tempPassword=r,r.length<8&&(a="Error en: Contraseña<br>");break;case"password_confirmation":(r.length<8||r!=tempPassword)&&(a="Error en: Las contraseñas son distintas<br>");break;case"nearby_areas_id":""==r&&(a="Error en: Preferencias de desplazamiento<br>");break;case"state":""==r&&(a="Error en: Provincia<br>");break;case"city":""==r&&(a="Error en: Ciudad<br>");break;case"address":r.length<5&&(a="Error en: Dirección<br>");break;case"zip_code":r.length<5&&(a="Error en: Código Postal<br>");break;case"cif":r.length<2&&(a="Error en: CIF<br>");break;case"corporate_name":r.length<4&&(a="Error en: Nombre de la Asociación<br>");break;case"activity_areas_id":0==r&&(a="Error en: Área de actividad<br>")}return a}function errorServer(e){$(".title-form .errorsNotification").remove(),$(".title-form").append("<div class='errorsNotification'> <div>"),$.each(e,function(e,r){return $(".title-form .errorsNotification").remove(),$(".title-form").append("<div class='errorsNotification'> <div>"),$(".title-form .errorsNotification").append("<p style='text-align:center; color:red'>"+r+"</p>"),$("input[name="+e+"]").focus(),$("input[name="+e+"]").val(""),!1})}function postData(e){$.ajax({type:"POST",url:server+"api/public/auth/register",data:e,dataType:"json"}).then(function(e){window.location.href="./registro-confirmado"}).fail(function(e){e.responseJSON&&e.responseJSON.errors&&errorServer(e.responseJSON.errors)})}var tempPassword="";$(document).ready(function(){initValues(),$("#form-help, #form-vol, #form-ent").submit(function(e){var r=getDataForm(e);null!=r&&postData(r)})}),function(){"use strict";window.addEventListener("load",function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(e){e.addEventListener("submit",function(r){!1===e.checkValidity()&&(r.preventDefault(),r.stopPropagation()),e.classList.add("was-validated")},!1)})},!1)}();