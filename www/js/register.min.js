function initValues(){let e=$(".ayuda-provincia"),a=$(".ayuda-ciudad");e.empty(),a.empty(),e.append('<option selected="true" value="" disabled>--Seleccione provincia--</option>'),e.prop("selectedIndex",0),a.append('<option selected="true" value="" disabled>--Seleccione población--</option>'),a.prop("selectedIndex",0),$.each(provincias,function(a,t){e.append($("<option></option>").attr("value",t.id).text(t.nm))}),e.change(function(){var e=$(this).val();a.empty(),a.append('<option selected="true" value="" disabled>--Seleccione población--</option>'),a.prop("selectedIndex",0),a.prop("disabled",!1),$.each(ciudades,function(t,n){n.id.substring(0,2)==e&&a.append($("<option></option>").attr("value",n.id).text(n.nm))})})}function getDataForm(e){e.preventDefault();var a={},t="";$.each(e.originalEvent.srcElement.elements,function(e,n){if(t=checkValues(n.name,n.value),$(".error").remove(),""!=t)return $("#"+n.name).after("<small class='error'><p style='text-align:center; color:red'><strong>"+t+"</strong></p></small>"),!1;a[n.name]=n.value});let n=$("#checkLegal").is(":checked");return $(".user-form-check").css("color",n?"#212529":"red"),$(".user-form-check").css("font-weight",n?"normal":"bold"),""==t&&n?a:null}function checkValues(e,a){var t="";if(0===a.length&&"check"!==e&&""!==e)t="El campo no puede estar vacío";else switch(e){case"name":nameregex=/^[a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1]+$/,nameregex.test(a)||(t="No debe contener caracteres especiales");break;case"email":emailRegex=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,emailRegex.test(a)||(t="Conflicto en el formato de Email");break;case"phone":8==a.length&&9==a.length||(phoneRegex=/^[0-9]{8,9}$/,phoneRegex.test(a)||(t="El teléfono debe de tener 8 o 9 digitos"));break;case"password":tempPassword=a,a.length<8&&(t="La contraseña debe tener 8 o 9 digitos");break;case"password_confirmation":(a.length<8||a!=tempPassword)&&(t="Las contraseñas son distintas");break;case"nearby_areas_id":""==a&&(t="Seleccione una área de actuación");break;case"state":""==a&&(t="Seleccione una provincia");break;case"city":""==a&&(t="Seleccione una ciudad");break;case"address":a.length<5&&(t="Dirección incompleta");break;case"zip_code":a.length<5&&(t="El código postal debe de tener 5 digitos");break;case"cif":8==a.length&&9==a.length||(t="CIF Incompleto");break;case"corporate_name":a.length<3&&(t="Conflicto en nombre de la asociación");break;case"activity_areas_id":""==a&&(t="Seleccione una área de actividad")}return t}function errorServer(e){$.each(e,function(e,a){return $(".error").remove(),$("#"+e).after("<small class='error'><p style='text-align:center; color:red'><strong>"+a+"</strong></p></small>"),$("input[name="+e+"]").focus(),$("input[name="+e+"]").val(""),!1})}function postData(e){$.ajax({type:"POST",url:server+"api/public/auth/register",data:e,dataType:"json"}).then(function(e){window.location.href="./registro-confirmado"}).fail(function(e){e.responseJSON&&e.responseJSON.errors&&errorServer(e.responseJSON.errors)})}var tempPassword="";$(document).ready(function(){initValues(),$("#form-help, #form-vol, #form-ent").submit(function(e){var a=getDataForm(e);null!=a&&postData(a)}),$("input").blur(function(){if(error=checkValues(this.name,this.value),$(".error").remove(),""!=error)return $("#"+this.name).after("<small class='error'><p style='text-align:center; color:red'><strong>Conflicto en el campo "+this.name+"</strong></p></small>"),!1})}),function(){"use strict";window.addEventListener("load",function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(e){e.addEventListener("submit",function(a){!1===e.checkValidity()&&(a.preventDefault(),a.stopPropagation()),e.classList.add("was-validated")},!1)})},!1)}();